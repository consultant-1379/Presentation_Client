{
    "properties": {
        "buildDir": "target",
        "sdkTools": "$(pathToSdk)/tools",
        "testRunner": "$(sdkTools)/test/test-runner.js",
        "node": "node",
        "npm": {
            "?os.platform=windows": "npm.cmd",
            "?os.platform=unix": "npm"
        },
        "jscoverage": {
            "?os.platform=windows": "$(sdkTools)/jscoverage/jscoverage.exe",
            "?os.platform=unix": "$(sdkTools)/jscoverage/jscoverage"
        },
        "phantomjs": {
            "?os.platform=windows": "$(sdkTools)/phantomjs/bin/phantomjs.exe",
            "?os.platform=unix": "$(sdkTools)/phantomjs/bin/phantomjs"
        },
        "uglifyjs": "$(node) $(pathToSdk)/node_modules/uglify-js/bin/uglifyjs",
        "rjs": "$(node) $(pathToSdk)/node_modules/requirejs/bin/r.js",
        "jshint": "$(node) $(pathToSdk)/node_modules/jshint/bin/jshint",
        "cssverify": "$(node) $(sdkTools)/cssverify/cssverify.js",
        "rootname": "$(name)/$(version)",

        "name": "networkExplorer",
        "version": "0.0.1-SNAPSHOT"
    },
    "defaultPhase": "compile",
    "phases": {
        "clean": {
            "delete": {
                "target": "$(buildDir)"
            }
        },
        "optimize": {
            "rjs": {
                "name":"$(name)",
                "config": {
                    "baseUrl": "src",
                    "dir": "$(buildDir)/temp",
                    "optimize": "uglify2",
                    "resources": "$(name)/resources",
                    "paths": {
                        "jscore": "empty:",
                        "jscore/core": "empty:",
                        "jscore/ext/dom": "empty:",
                        "jquery-2.0.2": "empty:",
                        "text": "../node_modules/jscore/require/text"

                    },
                    "stubModules": [
                        "text"

                    ],
                    "modules": [
                        {
                            "name": "$(name)/$(name)"
                        }
                    ]
                }
            }

        },

        "copy-resource": {
            "copy": {
                "from": [
                    "resources/*"
                ],
                "to":"$(buildDir)/package/$(name)/resources/"
            }
        },
        "copy-appNoCache": {
            "copy": {
                "from":"$(buildDir)/temp/app.nocache.js",
                "to":"$(buildDir)/package/$(name)/"
            }
        },
        "compile": {
            "depends": [
                "clean",
                "optimize",
                "copy-resource",
                "copy-appNoCache"

            ],
            "copy": {
                "fileFilter":"^([a-zA-Z0-9]{32,32}).js$",
                "from":"$(buildDir)/temp/*",
                "to":"$(buildDir)/package/$(name)/"
            }
        },

        "prepare-package": {
            "copy": {
                "from": [
                    "package.json"
                ],
                "to": "$(buildDir)/package/"
            },
            "mergeJson": {
                "file": "$(buildDir)/package/package.json",
                "json": {
                    "name": "$(name)",
                    "version": "$(version)"
                }
            }
        },

        "package": {
            "depends": ["compile", "prepare-package"],
            "execute": {
                "command": "$(npm)",
                "attributes": [
                    "pack",
                    "$(buildDir)/package"
                ]
            },
            "copy": {
                "from": "$(name)-$(version).tgz",
                "to": "$(buildDir)/$(name)-$(version).tar.gz"
            },
            "delete": {
                "target": "$(name)-$(version).tgz"
            }
        }

    }
}
